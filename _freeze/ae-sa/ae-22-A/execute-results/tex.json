{
  "hash": "048fdbf2ca95523bd0431a73ac766e74",
  "result": {
    "markdown": "---\ntitle: \"AE-22-Hypo-Testing-III\"\nformat: pdf\neditor: visual\n---\n\n\n## Discussion around alpha\n\nWhat is alpha?\n\nWhy would a researcher choose to have a larger or smaller $\\alpha$ value?\n\n## Iris Data\n\nThe Iris Dataset contains four features (length and width of sepals and petals) of 50 samples of three species of Iris (Iris setosa, Iris virginica and Iris versicolor). A sepal is the outer parts of the flower (often green and leaf-like) that enclose a developing bud. The petal are parts of a flower that are the pollen producing part of the flower that are often conspicuously colored. The difference between sepals and petals can be seen below.\n\nThe data were collected in 1936 at the Gaspé Peninsula, in Canada. For the first question of the exam, you will use this data sets to investigate a variety of relationships to learn more about each of these three flower species. The data set is prepackaged in R, and is called `iris`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching packages --------------------------------------- tidyverse 1.3.2 --\nv ggplot2 3.4.0     v purrr   0.3.5\nv tibble  3.1.8     v dplyr   1.0.9\nv tidyr   1.2.1     v stringr 1.4.1\nv readr   2.1.3     v forcats 0.5.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggplot2' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tidyr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'readr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'purrr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidymodels)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching packages -------------------------------------- tidymodels 1.0.0 --\nv broom        1.0.1     v rsample      1.1.0\nv dials        1.1.0     v tune         1.0.1\nv infer        1.0.3     v workflows    1.1.0\nv modeldata    1.0.1     v workflowsets 1.0.0\nv parsnip      1.0.3     v yardstick    1.1.0\nv recipes      1.0.3     \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'broom' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dials' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'parsnip' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'recipes' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Conflicts ----------------------------------------- tidymodels_conflicts() --\nx scales::discard() masks purrr::discard()\nx dplyr::filter()   masks stats::filter()\nx recipes::fixed()  masks stringr::fixed()\nx dplyr::lag()      masks stats::lag()\nx yardstick::spec() masks readr::spec()\nx recipes::step()   masks stats::step()\n* Use suppressPackageStartupMessages() to eliminate package startup messages\n```\n:::\n\n```{.r .cell-code}\nlibrary(openintro)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: airports\nLoading required package: cherryblossom\nLoading required package: usdata\n\nAttaching package: 'openintro'\n\nThe following object is masked from 'package:modeldata':\n\n    ames\n```\n:::\n\n```{.r .cell-code}\ndata(iris)\n```\n:::\n\n\nFrom last AE, calculate and report the sample statistic below:\n\n\n::: {.cell}\n\n:::\n\n\n## Theory Based\n\nThe t-distribution can be used for inference when working with the standardized difference of two means if:\n\n**Independence**\n\n**Large samples and no extreme outliers**\n\nSteps:\n\n1)  Check assumptions\n\n2)  Calculate sample mean\n\n3)  Calculate SE\n\n4)  Use 2 & 3 to calculate t-statistic\n\n5)  Calculate p-value\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#define your difference in means as your estimate below\n\nestimate <-\n```\n:::\n\n\nThe standard error of the different in sample means can be calculated as follows:\n\n![](images/se-2.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsd1 <- \nn1 <- \n\nsd2 <-\nn2 <-   \n```\n:::\n\n\nNow, use the information to calculate your t-statistic below:\n\n![](images/t-stat.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntscore <- \n```\n:::\n\n\nWe use `pt` to calculate our p-value. Recall that we need to define our degrees of freedom! Commonly, we use `min(n1-1; n2-1)`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#insert code here\n```\n:::\n\n\nWrite an appropriate scope of inference in the context of the problem below:\n\n**Add Response**\n\n## Two Categorical Variables: Case study: CPR and blood thinner\n\nCardiopulmonary resuscitation (CPR) is a procedure used on individuals suffering a heart attack when other emergency resources are unavailable. This procedure is helpful in providing some blood circulation to keep a person alive, but CPR chest compressions can also cause internal injuries. Internal bleeding and other injuries that can result from CPR complicate additional treatment efforts. For instance, blood thinners may be used to help release a clot that is causing the heart attack once a patient arrives in the hospital. However, blood thinners negatively affect internal injuries.\n\nHere we consider an experiment with patients who underwent CPR for a heart attack and were subsequently admitted to a hospital. Each patient was randomly assigned to either receive a blood thinner (treatment group) or not receive a blood thinner (control group). The outcome variable of interest was whether the patient survived for at least 24 hours.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(cpr)\n```\n:::\n\n\nCalculate your sample statistic below. Next, write out your sample statistic using proper notation (died - survived).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncpr |>\n  group_by(group, outcome) |>\n  summarize(props = n())\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'group'. You can override using the\n`.groups` argument.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 x 3\n# Groups:   group [2]\n  group     outcome  props\n  <fct>     <fct>    <int>\n1 control   died        39\n2 control   survived    11\n3 treatment died        26\n4 treatment survived    14\n```\n:::\n:::\n\n\nNow create an appropriate visualization of these data below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncpr |>\n  ggplot(\n    aes(x = group , y = ..count..)\n  ) + \n  geom_bar(aes(fill = outcome), position = \"stack\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\ni Please use `after_stat(count)` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](ae-22-A_files/figure-pdf/unnamed-chunk-9-1.pdf){fig-pos='H'}\n:::\n:::\n\n\nNext, explain how one dot (observation) is created on the permutation null distribution used to test our hypotheses...\n\n**Add Response**\n\nNow, calculate the p-value below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\n\nnull_dist <- cpr |>\n  specify(response = outcome , explanatory = group , success = \"died\") |>\n  hypothesize(null = \"independence\") |>\n  generate(reps = 1000, type = \"permute\") |>\n  calculate(stat = \"diff in props\" , order = c(\"control\", \"treatment\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_dist) +\n shade_p_value(obs_stat = .13, direction = \"two-sided\") \n```\n\n::: {.cell-output-display}\n![](ae-22-A_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\nnull_dist |>\n  get_p_value(obs_stat = .13, direction = \"two-sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 x 1\n  p_value\n    <dbl>\n1   0.216\n```\n:::\n:::\n\n\n## Conditions for the sampling distribution to be Normal\n\n-- Independence\n\n-- Success-failure condition\n\nWe use a special proportion called the pooled proportion to check the success-failure condition\n\np-pooled = Total number of successes  Total number of participants in the study\n\n-- Report this value below:\n\n**Add Response**\n\nThis proportion is an estimate of survival rate across the study if the null hypothesis is true. We than use the following formula to check this condition:\n\n$\\hat{p_{pool}}$ x $n_1$ \\> 10 ?\n\n$\\hat{p_{pool}}$ x $n_2$ \\> 10 ?\n\n$1 - \\hat{p_{pool}}$ x $n_1$ \\> 10 ?\n\n$1 - \\hat{p_{pool}}$ x $n_2$ \\> 10\n\nThe success-failure condition is satisfied since all values are at least 10.\n\nDo we satisfy this condition?\n\nWith both conditions satisfied, we can safely model the difference in proportions using a normal distribution.\n\n![](images/p-pool.png)\n\nCalculate the standard error under the assumption of the null hypothesis below. Your calculation should come out to 0.0952\n\n\n::: {.cell}\n\n```{.r .cell-code}\nse <- sqrt(0.72*0.28*((1/50) + (1/40)))\n```\n:::\n\n\n![](images/z-stat.png)\n\nUsing the above information, calculate our zscore:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nzscore <- 0.13 / se\n```\n:::\n\n\nUsing the normal distribution, calculate our p-value\n\n\n::: {.cell}\n\n```{.r .cell-code}\n2*pnorm(zscore, lower.tail = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.1722934\n```\n:::\n:::\n",
    "supporting": [
      "ae-22-A_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}