{
  "hash": "09f85056a6a5e86d9a2458e45abd6914",
  "result": {
    "markdown": "---\ntitle: \"Intro to Inference: Bootstrap + Hypothesis Testing\"\nsubtitle: \"Suggested Answers\"\ncategories: \n  - Application exercise\neditor: visual\n---\n\n\n# Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.4.0     ✔ purrr   0.3.5\n✔ tibble  3.1.8     ✔ dplyr   1.0.9\n✔ tidyr   1.2.1     ✔ stringr 1.4.1\n✔ readr   2.1.3     ✔ forcats 0.5.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggplot2' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tidyr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'readr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'purrr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidymodels)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ────────────────────────────────────── tidymodels 1.0.0 ──\n✔ broom        1.0.1     ✔ rsample      1.1.0\n✔ dials        1.1.0     ✔ tune         1.0.1\n✔ infer        1.0.3     ✔ workflows    1.1.0\n✔ modeldata    1.0.1     ✔ workflowsets 1.0.0\n✔ parsnip      1.0.3     ✔ yardstick    1.1.0\n✔ recipes      1.0.3     \n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'broom' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dials' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'parsnip' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'recipes' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n• Dig deeper into tidy modeling with R at https://www.tmwr.org\n```\n:::\n\n```{.r .cell-code}\nlibrary(openintro)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: airports\nLoading required package: cherryblossom\nLoading required package: usdata\n\nAttaching package: 'openintro'\n\nThe following object is masked from 'package:modeldata':\n\n    ames\n```\n:::\n:::\n\n\n# Bootstrap methods: Categorical Variables\n\n## Bumba or Kiki\n\nHow well can humans distinguish one \"Martian\" letter from another?\n\nIn today's activity, we'll find out. When shown the two Martian letters, kiki and bumba, please think TO YOURSELF about which letter is kiki. When asked, reveal your answer.\n\nOnce it's revealed which option is correct, please write our sample statistic below:\n\n$\\hat{p}$ = 13/14 or 0.929 the SAMPLE proportion of students who correctly identified Bumba\n\nLet's write out the null and alternative hypotheses below. This is new! please take notes on all of this information as we go through it.\n\n$\\pi$ = the TRUE proportion of students who correctly identified Bumba\n\n$H_o$: $\\pi$ = 0.5\n\n$H_a$: $\\pi$ \\> 0.5\n\nNow, let's quickly make a data frame of the data we just collected as a class. Replace the ... with the number of correct and incorrect guesses.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_data <- tibble(\n  correct_guess = c((rep(\"Correct\" , 13)), rep(\"Incorrect\" , 1))\n\n)\n```\n:::\n\n\nNow let's simulate our null distribution by filling in the blanks. Below, detail how this distribution is created.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(333)\n\nnull_dist <- class_data |>\n  specify(response = correct_guess, success = \"Correct\") |>\n  hypothesize(null = \"point\", p = 0.5) |>\n  generate(reps = 1000, type = \"draw\") |>\n  calculate(stat = \"prop\")\n```\n:::\n\n\nHelpful Hint: Remember that you can use `?` next to the function name to pull up the help file!\n\n-- Assume pi = .5\n\n-- Take a random sample with replacement n = 14 times\n\n-- Calculate the new sample proportion\n\n-- Do that entire process 1000 (or something large)\n\n-- Plot it! Plot our null distribution\n\nCalculate and visualize the distribution below. Using this distribution, we are going to calculate a p-value.\n\nWhat is a p-value?\n\n**A probability of observing our observed statistic, or something \"more extreme\" given the null hypothesis is true**\n\nHow is it used to make decisions?\n\n**We see how small/large it is. We can compare it to a significance level (alpha).**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_dist) +\n  shade_p_value(0.929 , direction = \"right\")\n\nnull_dist |>\n  get_p_value(0.929 , direction = \"right\")\n```\n:::\n\n\nBased on our p-value, let's write an appropriate decision, conclusion, and interpretation of a p-value in the context of the problem.\n\n## Significance level\n\nWhat is it?\n\n$\\alpha$ = a measure of the strength of the evidence that must be present in your sample before rejecting the null and concluding your alternative hypothesis. This is normally 0.05, but can be set by the researcher prior to the study.\n\n0.001 \\< 0.05\n\n**Decision**: We have evidence to reject the null hypothesis that the true (population) proportion of students who can correctly identify bumba is equal to .5.\n\n-- Always in the context of the null hypothesis\n\n**Conclusion**:\n\nWe have evidence to conclude that the true proportion of students who correctly identify bumba is larger than .5.\n\n-- Always in the context of the alternative hypothesis\n\n**Interpretation**: The probability of observing 13 out of 14 students correctly identifying bumba, or something larger, given that the true proportion of students who can correctly identify bumba is equal to 0.5 is 0.001.\n\nSo, can we read Martian?\n\n## Ted Talk\n\nhttp://www.ted.com/talks/vilayanur_ramachandran_on_your_mind\n\n# How does this change if we work with Two Categorical Variables?\n\n## Two Categorical Variables: Case study: CPR and blood thinner\n\nCardiopulmonary resuscitation (CPR) is a procedure used on individuals suffering a heart attack when other emergency resources are unavailable. This procedure is helpful in providing some blood circulation to keep a person alive, but CPR chest compressions can also cause internal injuries. Internal bleeding and other injuries that can result from CPR complicate additional treatment efforts. For instance, blood thinners may be used to help release a clot that is causing the heart attack once a patient arrives in the hospital. However, blood thinners negatively affect internal injuries.\n\nHere we consider an experiment with patients who underwent CPR for a heart attack and were subsequently admitted to a hospital. Each patient was randomly assigned to either receive a blood thinner (treatment group) or not receive a blood thinner (control group). The outcome variable of interest was whether the patient survived for at least 24 hours. We are interested in if the proportion of patients who died were different between those who were given blood thinners or not. Note: We will considered \"died\" as a \"success\"\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(cpr)\n```\n:::\n\n\nNow, write out your null and alternative hypothesis in proper notation (control - treatment).\n\n$H_0$: $\\pi_c - \\pi_t$ = 0\n\n$H_a$: $\\pi_c - \\pi_t$ $\\neq$ 0\n\nCalculate your sample statistic below. Use proper notation (control - treatment). We will considered \"died\" as a \"success\" - what we are taking the proportion of, for the remainder of this activity.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncpr |> \n  group_by(group, outcome) |>\n  summarize(count = n())\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'group'. You can override using the\n`.groups` argument.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n# Groups:   group [2]\n  group     outcome  count\n  <fct>     <fct>    <int>\n1 control   died        39\n2 control   survived    11\n3 treatment died        26\n4 treatment survived    14\n```\n:::\n\n```{.r .cell-code}\nestimate <- .78 - .65\n```\n:::\n\n\n(Note: Normally, we calculate EDA with summary statistics, but to save time, we are going to skip this part)\n\n## Simulate\n\nStart next class here!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}