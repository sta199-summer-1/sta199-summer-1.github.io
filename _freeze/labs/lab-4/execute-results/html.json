{
  "hash": "433ca0f3d4f12bf44db656248aeb5645",
  "result": {
    "markdown": "---\ntitle: \"Lab 4 - Merge Conflicts and Data Science Ethics\"\ncategories: \"Lab\"\nexecute:\n  eval: true\n---\n\n\n::: callout-important\nThis lab and the team agreement are both due Tuesday, February 28th at 11:59pm.\n:::\n\n# Learning Goals\n\n-   Collaborating on GitHub and resolving merge conflicts\n-   Critiquing visualizations that misrepresent data\n-   Improving data visualizations to better convey the right message\n\n# Getting started\n\n-   Go to the [sta199-s23-02](https://github.com/sta199-s23-2) organization on GitHub. Click on the repo with the prefix `lab-04`. It contains the starter documents you need to complete the lab.\n-   Clone the repo and start a new project in RStudio. See the [Lab 0 instructions](https://sta199-s23-2.github.io/labs/lab-0.html#clone-the-repo-start-new-rstudio-project) for details on cloning a repo and starting a new R project.\n\n## Why Teams: Rationale\n\nIn the real world, data scientists and statisticians often work in research teams. It is a skill to be able to communicate and work together on common projects. Thus, the remaining labs + your project will be team based.\n\nTeams work better when members have a common understanding of the team's goals and expectations for collaboration. The purpose of this activity is to help your team making a plan for working together during lab and outside of the scheduled lab time.\n\nEach team member will have some ideas about how a team should operate. These ideas may be very different. This is your opportunity to share your thoughts and ideas to promote optimal team function and prevent misunderstandings in the future.\n\n## Team Name\n\nDiscuss with your group a team name to be called. Your GitHub repos will be created for this team name moving forward. Report your team name to your Lab Leader before moving on.\n\n## Instructions\n\nBefore completing the lab today, you will complete a team agreement. Discuss each of the items below with all in-person team members. If necessary, also follow up this week with any missing team members.\n\nHave *one person* act as the recorder and type the team's decisions in the `team-agreement.qmd` file.\n\n*Be sure the team agrees on an item before it is added to the document.*\n\nOnce the document is complete, the recorder should render, commit, and push the team agreement to GitHub. All team members can refer to this document throughout the semester.\n\n## Team Agreement\n\n### Weekly meetings\n\nIdentify a 1 - 2 hour weekly block outside of lab where the team can meet to work on assignments. All team members should block off this time on their calendar in case the group needs to meet to finish lab or work on the project.\n\n### Meeting \"location\"\n\nHow the team will meet to work together (e.g. in-person, Zoom, Facetime, Google Hangouts). Be sure every member is able to access the virtual meeting space, if needed. If you are unable to find a weekly time when the team can meet, briefly outline a plan to work on assignments outside of lab. Otherwise, you can delete this item.\n\n### Primary method of communication\n\nThe team's primary method of communication outside of meetings (e.g. Slack, text messages, etc.)\n\n### How should someone notify the other members if they are unable to attend lab or a scheduled team meeting?\n\n### By when should everyone have their portion of the lab completed?\n\nKeep in mind your team may want to have time to review the lab before turning it in to make sure it is a cohesive write up.\n\n### Any other items the team would like to discuss or plan.\n\n### Missing Teammates\n\nIf you are missing teammates for today's lab, it is your responsibility to reach out, say hello, and communicate with them that they must contribute to the above and below questions before submitting lab-04 to Gradescope. You can find their email in the teams repo. The link to the teams repo is located on our website on the teaching team tab.\n\n# Resolving merge conflicts\n\nWorking in teams includes using a shared GitHub repo for labs and projects. Sometimes things will go swimmingly, and sometimes you'll run into merge conflicts.\n\nWhen you and your teammates work on the lines of code within a document, and both try to push your changes, you will run into issues. Merge conflicts happen when you merge branches that have competing renders, and Git needs your help to decide which changes to incorporate in the final merge.\\\n\nOur first task today is to walk you through a merge conflict!\\\n\nIf you haven't yet done so since filling out the *Team Agreement*, now is a good time to render, commit, and push. Make sure that you render and push all changed documents and your Git pane is completely empty before proceeding.\n\n-   Pushing to a repo replaces the code on GitHub with the code you have on your computer.\n-   If a collaborator has made a change to your repo on GitHub that you haven't incorporated into your local work, GitHub will stop you from pushing to the repo because this could overwrite your collaborator's work!\n-   So you need to explicitly \"merge\" your collaborator's work before you can push.\n-   If your and your collaborator's changes are in different files or in different parts of the same file, git merges the work for you automatically when you \\*pull\\*.\n-   If you both changed the same part of a file, git will produce a \\*\\*merge conflict\\*\\* because it doesn't know how which change you want to keep and which change you want to overwrite.\n\nGit will put conflict markers in your code that look like:\n\n    <<<<<<< HEAD \n\n    See also: [dplyr documentation](https://dplyr.tidyverse.org/)   \n\n    ======= \n\n    See also [ggplot2 documentation](https://ggplot2.tidyverse.org/)  \n\n    >>>>>>> some1alpha2numeric3string4\n\nThe `===`s separate *your* changes (top) from *their* changes (bottom).\n\nNote that on top you see the word `HEAD`, which indicates that these are your changes.\n\nAnd at the bottom you see `some1alpha2numeric3string4` (well, it probably looks more like `28e7b2ceb39972085a0860892062810fb812a08f`).\n\nThis is the **hash** (a unique identifier) of the render your collaborator made with the conflicting change.\n\nYour job is to *reconcile* the changes: edit the file so that it incorporates the best of both versions and delete the `<<<`, `===`, and `>>>` lines. Then you can stage and render the result.\n\n# Merge conflict activity\n\n## Setup\n\n-   Clone the repo and open the .qmd file.\n-   Assign the numbers 1, 2, 3, and 4 to each of the team members. If your team has fewer than 4 people, some people will need to have multiple numbers. If your team has more than 4 people, some people will need to share some numbers.\n\n## Let's cause a merge conflict!\n\nOur goal is to see two different types of merges: first we'll see a type of merge that git can't figure out on its own how to do on its own (a **merge conflict**) and requires human intervention, then another type of where that git can figure out how to do without human intervention.\n\nDoing this will require some tight choreography, so pay attention!\n\nTake turns in completing the exercises, only one member at a time. **Others should just watch, not doing anything on their own projects (this includes not even pulling changes!)** until they are instructed to. If you feel like you won't be able to resist the urge to touch your computer when it's not your turn, we recommend putting your hands in your pockets or sitting on them!\n\n**Before starting**: everyone should have the repo cloned, open the `lab4.qmd` document, and know which role number(s) they are.\n\n**Everyone**:\n\n-   In order to resolve merge conflicts using the instructions below, git needs to have the correct settings.\n-   To ensure this is true, copy and paste `git config pull.rebase false` into your **terminal** and press enter. (Look for the tab next to the console, and ask if you can't find it.)\n-   Note that if a merge conflict comes up in a later assignment, you may need to do this step again before resolving it. If that's the case, you'll likely get a warning suggesting it when you try to pull and there's a conflict.\n\nðŸ›‘ Make sure everyone has completed this step before moving on.\n\n**Role 1:**\n\n-   Change \"TEAM NAME\" in the YAML to your actual team name.\n-   render, commit, push.\n\nðŸ›‘ Make sure the previous role has finished before moving on to the next step.\n\n**Role 2:**\n\n-   Change \"TEAM NAME\" to some other word.\n-   Render, commit, push. You should get an error.\n-   Pull. Take a look at the document with the merge conflict.\n-   Clear the merge conflict by editing the document to choose the correct/preferred change.\n-   Render.\n-   **Click the Stage checkbox** for all files in your Git tab. Make sure they all have check marks, not filled-in boxes.\n-   commit and push.\n\nðŸ›‘ Make sure the previous role has finished before moving on to the next step.\n\n**Role 3:**\n\n-   Add a code chunk for Exercise 2 and give it a label.\n-   Render, commit, push. You should get an error.\n-   Pull. No merge conflicts should occur, but you should see a message about merging.\n-   Now push.\n\nðŸ›‘ Make sure the previous role has finished before moving on to the next step.\n\n**Role 4:**\n\n-   Add a code chunk to Exercise 2 and give it a different label.\n-   Render, commit, push. You should get an error.\n-   Pull. Take a look at the document with the merge conflict. Clear the merge conflict by choosing the correct/preferred change. render, and push.\n\nðŸ›‘ Make sure the previous role has finished before moving on to the next step.\n\n**Everyone:** Pull, and observe the changes in your document.\n\n## Tips for collaborating via GitHub\n\n-   **Always pull first before you start working.**\n-   Resolve a merge conflict (render and push) *before* continuing your work. Never do new work while resolving a merge conflict.\n-   Render, commit, and push often to minimize merge conflicts and/or to make merge conflicts easier to resolve.\n-   If you find yourself in a situation that is difficult to resolve, ask questions ASAP. Don't let it linger and get bigger.\n\n# Conveying the right message through visualization\n\n## Packages\n\nWe'll use the **tidyverse** package for much of the data wrangling and visualization.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ggplot2' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tidyr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'readr' was built under R version 4.2.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'purrr' was built under R version 4.2.2\n```\n:::\n:::\n\n\nSince the exercises for this week are short it's possible not every team member will get to commit and push **during** the workshop. However each team member should review what was created, fix typos, make edits for better presentation, etc. either during or after the workshop, and before the deadline.\n\nNote: Everyone should intellectually contribute to every question. However, no two teammates should work on the same question at the same time below.\n\n## Data\n\nIn this lab you'll construct the data set!\n\n# Exercises\n\nThe following visualization was shared [on Twitter](https://twitter.com/JonBoeckenstedt/status/1291602888376999936) as \"extraordinary misleading\".\n\n![](images/lab-4/masks-v-nomasks.png)\n\n1.  What is misleading about this visualization and how might you go about fixing it?\n\n::: render-commit-push\nIf you haven't yet done so, now is a good time to render, commit, and push. Make sure that you commit and push all changed documents and your Git pane is completely empty before proceeding.\n\n<br>\n:::\n\n**Everyone now pull**\n\n2.  Create a data frame that could be used to recreate this visualization. You may need to guess some of the numbers -- just make them as accurate as you can. You should first think about how many rows and columns you'll need and what you want to call your variables. Then, you can use the `tribble()` function to create the data frame. To get a sense of how `tribble()` works, try running the code below in your console and then looking at the structure of the resulting data frame `df`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- tribble(\n  ~date, ~count,\n  \"1/1/2020\", 15,\n  \"2/1/2020\", 20,\n  \"3/1/2020\", 22,\n)\n```\n:::\n\n\nPrint the first 5 rows of the data frame after creating it. You may name the data frame what you like. We often try and keep data frame names small and informative.\n\n::: render-commit-push\nIf you haven't yet done so, now is a good time to render, commit, and push. Make sure that you commit and push all changed documents and your Git pane is completely empty before proceeding.\n\n<br>\n:::\n\n**Everyone now pull**\n\n\n::: {.cell}\n\n:::\n\n\n3.  Make a visualization that more accurately (and honestly) tells the story.\n\n\n::: {.cell}\n\n:::\n\n\n::: render-commit-push\nIf you haven't yet done so, now is a good time to render, commit, and push. Make sure that you commit and push all changed documents and your Git pane is completely empty before proceeding.\n\n<br>\n:::\n\n**Everyone now pull**\n\n4.  What message is more clear in your visualization than it was in the original visualization? Why is it more clear?\n\n::: render-commit-push\nIf you haven't yet done so, now is a good time to render, commit, and push. Make sure that you commit and push all changed documents and your Git pane is completely empty before proceeding.\n\n<br>\n:::\n\n**Everyone now pull**\n\n5.  What, if any, useful information do these data and your visualization tell us about mask wearing and COVID? Answers should focus only on what the visualization tells.\n\n::: render-commit-push\nIf you haven't yet done so, now is a good time to render, commit, and push. Make sure that you commit and push all changed documents and your Git pane is completely empty before proceeding.\n\n<br>\n:::\n\n**Everyone now pull**\n\n# Submission\n\nOnce you are finished with the lab, you will your final PDF document to Gradescope.\n\n::: callout-warning\nBefore you wrap up the assignment, make sure all documents are updated on your GitHub repo. We will be checking these to make sure you have been practicing how to render and push changes.\n\nYou must turn in a PDF file to the Gradescope page by the submission deadline to be considered \"on time\".\n\nMake sure your data are tidy! That is, your code should not be running off the pages and spaced properly. See: https://style.tidyverse.org/ggplot2.html\n:::\n\nTo submit your assignment:\n\n-   Go to <http://www.gradescope.com> and click *Log in* in the top right corner.\n-   Click *School Credentials* $\\rightarrow$ *Duke NetID* and log in using your NetID credentials.\n-   Click on your *STA 199* course.\n-   Click on the assignment, and you'll be prompted to submit it.\n-   Mark all the pages associated with exercise. All the pages of your lab should be associated with at least one question (i.e., should be \"checked\"). *If you do not do this, you will be subject to lose points on the assignment.*\n-   Do not select any pages of your .pdf submission to be associated with the *\"Workflow & formatting\"* question.\n\n# Grading\n\n| Component             | Points |\n|:----------------------|:-------|\n| Team Agreement        | 10     |\n| Ex 1                  | 5      |\n| Ex 2                  | 5      |\n| Ex 3                  | 15     |\n| Ex 4                  | 5      |\n| Ex 5                  | 5      |\n| Workflow & formatting | 5      |\n| **Total**             | **50** |\n\n::: callout-note\nThe \"Workflow & formatting\" grade is to assess the reproducible workflow. This includes:\n\n-   linking all pages appropriately on Gradescope\n-   putting your team and member names in the YAML at the top of the document\n-   committing the submitted version of your `.qmd` to GitHub\n-   Are you under the 80 character code limit? (You shouldn't have to scroll to see all your code). Pipes `%>%`, `|>` and ggplot layers `+` should be followed by a new line\n-   You should be consistent with stylistic choices, e.g.Â only use 1 of `=` vs `<-` and `%>%` vs `|>`\n-   All binary operators should be surrounded by space. For example `x + y` is appropriate. `x+y` is not.\n:::\n",
    "supporting": [
      "lab-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}